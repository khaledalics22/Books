(this.webpackJsonpbooks=this.webpackJsonpbooks||[]).push([[0],{54:function(e,t,n){},55:function(e,t,n){},70:function(e,t,n){},71:function(e,t,n){},72:function(e,t,n){},73:function(e,t,n){},74:function(e,t,n){},87:function(e,t,n){},88:function(e,t,n){},89:function(e,t,n){},90:function(e,t,n){},91:function(e,t,n){"use strict";n.r(t);var c=n(3),a=n.n(c),r=n(43),o=n.n(r),i=(n(54),n(19)),s=n(6),l=(n(55),n(39)),u=(n(59),n(60),l.a.initializeApp({apiKey:"AIzaSyCdAggi7FwFD5eFKI5J-SKQHlJZllSpZo0",authDomain:"books-ad527.firebaseapp.com",projectId:"books-ad527",storageBucket:"books-ad527.appspot.com",messagingSenderId:"726816442080",appId:"1:726816442080:web:407f6f28ed52c3968a7285",measurementId:"G-QLMW55X952"}));l.a.analytics();var d=u,b=n(2),j=a.a.createContext(),h=function(e){var t=e.children,n=Object(c.useState)(JSON.parse(localStorage.getItem("authUser"))),a=Object(s.a)(n,2),r=a[0],o=a[1];return Object(c.useEffect)((function(){d.auth().onAuthStateChanged((function(e){return e?(console.log(e),o(e),localStorage.setItem("authUser",JSON.stringify(e))):(o(null),localStorage.removeItem("authUser"))})),d.auth().onAuthStateChanged(o)}),[]),Object(b.jsx)(j.Provider,{value:{currentUser:r},children:t})},f=n(10),p=n(13),m=["component"],v=function(e){var t=e.component,n=Object(f.a)(e,m),a=Object(c.useContext)(j).currentUser;return Object(b.jsx)(p.b,Object(i.a)(Object(i.a)({},n),{},{render:function(e){return a?Object(b.jsx)(t,Object(i.a)({},e)):Object(b.jsx)(p.a,{to:"/login"})}}))},O=n(12),x=n(7),g=n.n(x),k=n(14),N=(n(70),n.p+"static/media/logo.6ce24c58.svg"),y=Object(p.j)((function(e){var t,n,a=e.history,r=Object(c.useCallback)(function(){var e=Object(k.a)(g.a.mark((function e(c){var r,o,s,l,u,b,j,h,f,p,m;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.preventDefault(),l=c.target.elements,u=l.name,b=l.email,j=l.password,!(t&&("author"==n||"reader"==n)&&(null===u||void 0===u||null===(r=u.value)||void 0===r?void 0:r.length)>0&&(null===b||void 0===b||null===(o=b.value)||void 0===o?void 0:o.length)>0&&(null===j||void 0===j||null===(s=j.value)||void 0===s?void 0:s.length)>0)){e.next=25;break}return e.prev=3,e.next=6,d.auth().createUserWithEmailAndPassword(b.value,j.value);case 6:return p=e.sent,h=p.user,e.next=10,i(h,u,b);case 10:return f=e.sent,m=d.firestore(),e.next=14,m.collection("user").doc(h.uid).set({name:u.value,email:b.value,picture_url:f,user_type:n,liked_books:[],currently_raeding:[]});case 14:a.push("/"),e.next=23;break;case 17:if(e.prev=17,e.t0=e.catch(3),!h){e.next=22;break}return e.next=22,h.delete();case 22:alert(e.t0);case 23:e.next=26;break;case 25:alert("Invalid Inputs");case 26:case"end":return e.stop()}}),e,null,[[3,17]])})));return function(t){return e.apply(this,arguments)}}(),[a]),o=Object(c.useCallback)((function(e){t=e.target.files[0]?e.target.files[0]:N}),[a]);var i=function(){var e=Object(k.a)(g.a.mark((function e(n,c,a){var r,o,i,s,l;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,o=d.storage(),i=o.ref(),s=i.child("folder/"+r.name).put(r),e.next=6,s.then(Object(k.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.snapshot.ref.getDownloadURL().then(function(){var e=Object(k.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l=t;case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)}))));case 6:return e.abrupt("return",l);case 7:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}();return Object(b.jsx)("render",{children:Object(b.jsxs)("body",{className:"bodySignUp",children:[Object(b.jsx)("h1",{name:"signup",children:"Sign Up"}),Object(b.jsx)("div",{class:"container3",children:Object(b.jsxs)("form",{className:"formSingUp",style:{display:"inline-block"},onSubmit:r,children:[Object(b.jsx)("label",{className:"labelSignUp",children:"Name"}),Object(b.jsx)("input",{className:"inputSignUp",name:"name",type:"label",placeholder:"Name"}),Object(b.jsx)("label",{className:"labelSignUp",children:"Email"}),Object(b.jsx)("input",{className:"inputSignUp",name:"email",type:"email",placeholder:"Email"}),Object(b.jsx)("label",{className:"labelSignUp",children:" Password "}),Object(b.jsx)("input",{className:"inputSignUp",name:"password",type:"password",placeholder:"Password"}),Object(b.jsx)("label",{className:"labelSignUp",children:"Choose Image"}),Object(b.jsx)("input",{className:"inputFile",type:"file",id:"file",onChange:o}),Object(b.jsx)("label",{className:"labelSignUp",children:"User type"}),Object(b.jsx)("div",{onChange:function(e){var t;t=e.target.value,n=t},children:Object(b.jsxs)("form",{children:[Object(b.jsxs)("label",{class:"radio-inline",className:"radio-label",for:"author",children:[Object(b.jsx)("input",{type:"radio",id:"author",value:"author",name:"gender"}),"Author"]}),Object(b.jsxs)("label",{class:"radio-inline",className:"radio-label",for:"reader",children:[Object(b.jsx)("input",{type:"radio",id:"reader",value:"reader",name:"gender"}),"Reader"]})]})}),Object(b.jsx)("button",{className:"buttonSignUp",type:"submit",children:"Sign Up"}),Object(b.jsx)("br",{}),Object(b.jsx)(O.b,{className:"signUpLink",to:"/login",children:"Already have email? Login!"})]})})]})})})),w=(n(71),Object(p.j)((function(e){var t=e.history,n=Object(c.useCallback)(function(){var e=Object(k.a)(g.a.mark((function e(n){var c,a,r,o,i;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),r=n.target.elements,o=r.email,i=r.password,!((null===o||void 0===o||null===(c=o.value)||void 0===c?void 0:c.length)>0&&(null===i||void 0===i||null===(a=i.value)||void 0===a?void 0:a.length)>0)){e.next=14;break}return e.prev=3,e.next=6,d.auth().signInWithEmailAndPassword(o.value,i.value);case 6:t.push("/"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),alert(e.t0);case 12:e.next=15;break;case 14:alert("invalid inputs");case 15:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t){return e.apply(this,arguments)}}(),[t]);return Object(c.useContext)(j).currentUser?Object(b.jsx)(p.a,{to:"/"}):Object(b.jsx)("render",{children:Object(b.jsxs)("body",{className:"bodyLogin",children:[Object(b.jsx)("h1",{name:"login",children:"Login"}),Object(b.jsx)("div",{class:"container2",children:Object(b.jsxs)("form",{className:"formLogin",style:{display:"inline-block"},onSubmit:n,children:[Object(b.jsx)("label",{className:"labelLogin",children:" Email "}),Object(b.jsx)("input",{className:"inputLogin",name:"email",type:"label",placeholder:"Email"}),Object(b.jsx)("label",{className:"labelLogin",children:" Password "}),Object(b.jsx)("input",{className:"inputLogin",name:"password",type:"password",placeholder:"Password"}),Object(b.jsx)("button",{className:"buttonLogin",type:"submit",children:"Login"}),Object(b.jsx)("br",{}),Object(b.jsx)(O.b,{className:"loginLink",to:"/signup",children:"Don't have email? SignUP!"})]})})]})})}))),S=(n(72),function(e){var t=e.book;return Object(b.jsxs)("div",{className:"container",children:[Object(b.jsx)(O.b,{to:"/reviews/".concat(t.book_id),className:"img-container",children:Object(b.jsx)("img",{className:"book-img",src:t.cover_url})}),Object(b.jsxs)("div",{className:"text-container",children:[Object(b.jsx)("h1",{className:"book-title",children:t.title}),Object(b.jsxs)("h4",{className:"book-author",children:["by ",t.author_name]}),Object(b.jsx)("h5",{className:"category-label",children:"category:"}),Object(b.jsx)("h5",{className:"book-category",children:t.category}),Object(b.jsx)("h6",{className:"book-description",children:t.description})]})]})});n(73);function _(e){e.history;var t=d.firestore(),n=Object(c.useState)([]),a=Object(s.a)(n,2),r=a[0],o=a[1],i=Object(c.useState)(0),l=Object(s.a)(i,2),u=l[0],j=l[1],h=Object(c.useState)(!1),f=Object(s.a)(h,2),p=f[0],m=f[1],v=Object(c.useState)(null),O=Object(s.a)(v,2),x=O[0],N=O[1];var y=function(){var e=Object(k.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t.collection("book").limit(5).get().then((function(e){var t=[];e.docs.forEach((function(e){t.push(e.data())})),N(e.docs[e.docs.length-1]),o(r.concat(t))}))}catch(n){alert("something went wrong!")}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Object(k.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t.collection("book").startAfter(x).limit(5).get().then((function(e){var t=[];e.docs.forEach((function(e){t.push(e.data())})),N(e.docs[e.docs.length-1]),o(r.concat(t))}))}catch(n){m(!0)}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){y()}),[]),Object(c.useEffect)((function(){var e=function(e){window.innerHeight+window.scrollY>=document.body.offsetHeight&&!p&&w(),j(e.target.documentElement.scrollTop)};return window.addEventListener("scroll",e),function(){return window.removeEventListener("scroll",e)}}),[u]),Object(b.jsx)("div",{children:Object(b.jsx)("div",{className:"home-books",children:r.map((function(e){return Object(b.jsx)(S,{book:e},e.book_id)}))})})}n(74);var C=n(104),A=n(105),E=n(107),U=n(106),B=n(46),L=n.n(B);function I(e){return null!=e&&(null===e||void 0===e?void 0:e.length)>0?Object(b.jsxs)("div",{children:[Object(b.jsx)(C.a,{style:{backgroundColor:"white",height:"1px"}}),Object(b.jsx)(A.a,{maxWidth:"200px",spacing:"0px",cols:4,style:{textAlign:"left",textAlignLast:"left"},children:null===e||void 0===e?void 0:e.map((function(e){return Object(b.jsxs)(E.a,{className:"likedItemContainer",children:[Object(b.jsx)(O.b,{to:"/reviews/".concat(e.book_id),children:Object(b.jsx)("img",{src:e.cover_url,alt:e.title,className:"likedBooks"})}),Object(b.jsx)(U.a,{title:e.title,subtitle:e.author_name})]})}))})]}):Object(b.jsx)("p",{className:"no_books",children:"No books Yet!"})}function R(e){var t,n=e.history,a=d.firestore(),r=Object(c.useContext)(j).currentUser,o=Object(c.useState)(),i=Object(s.a)(o,2),l=i[0],u=i[1],h=Object(c.useState)(),f=Object(s.a)(h,2),p=f[0],m=f[1],v=Object(c.useState)(),O=Object(s.a)(v,2),x=O[0],N=O[1],y=function(){var e=Object(k.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{a.collection("user").doc(r.uid).get().then(function(){var e=Object(k.a)(g.a.mark((function e(t){var n,c,r,o;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.exists&&(u(t.data()),n=t.data().liked_books,c=[],null===n||void 0===n||n.forEach((function(e){c.push(e)})),null!=c&&c.length>0&&a.collection("book").where("book_id","in",c).get().then((function(e){var t=[];e.forEach((function(e){var n,c,a,r,o,i;t.push({book_id:e.data().book_id,title:null===(n=e.data())||void 0===n?void 0:n.title,description:null===(c=e.data())||void 0===c?void 0:c.description,author_name:null===(a=e.data())||void 0===a?void 0:a.author_name,category:null===(r=e.data())||void 0===r?void 0:r.category,cover_url:null===(o=e.data())||void 0===o?void 0:o.cover_url,rating:null===(i=e.data())||void 0===i?void 0:i.rating})})),m(t)})),r=t.data().currently_reading,o=[],null===r||void 0===r||r.forEach((function(e){o.push(e)})),null!=o&&o.length>0&&a.collection("book").where("book_id","in",o).get().then((function(e){var t=[];null===e||void 0===e||e.forEach((function(e){var n,c,a,r,o,i;t.push({book_id:e.data().book_id,title:null===(n=e.data())||void 0===n?void 0:n.title,description:null===(c=e.data())||void 0===c?void 0:c.description,author_name:null===(a=e.data())||void 0===a?void 0:a.author_name,category:null===(r=e.data())||void 0===r?void 0:r.category,cover_url:null===(o=e.data())||void 0===o?void 0:o.cover_url,rating:null===(i=e.data())||void 0===i?void 0:i.rating})})),N(t)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}catch(t){alert("something went wrong!")}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=Object(c.useState)(),S=Object(s.a)(w,2),_=S[0],C=S[1],A=function(){var e=Object(k.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.collection("book").where("publisher_id","==",null===r||void 0===r?void 0:r.uid).get().then((function(e){var t=[];e.forEach((function(e){var n,c,a,r,o,i;t.push({book_id:e.data().book_id,title:null===(n=e.data())||void 0===n?void 0:n.title,description:null===(c=e.data())||void 0===c?void 0:c.description,author_name:null===(a=e.data())||void 0===a?void 0:a.author_name,category:null===(r=e.data())||void 0===r?void 0:r.category,cover_url:null===(o=e.data())||void 0===o?void 0:o.cover_url,rating:null===(i=e.data())||void 0===i?void 0:i.rating})})),C(t)})).catch((function(e){alert(e)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){y(),A()}),[]),t="author"==(null===l||void 0===l?void 0:l.user_type)?Object(b.jsxs)("div",{children:[Object(b.jsx)("h2",{className:"profileHeaders",children:"Published Books"}),Object(b.jsx)("button",{className:"buttonAddBookAction",onClick:function(){n.push("/add-book")},children:"+"}),I(_)]}):Object(b.jsx)("br",{});var E=I(p),U=I(x);return Object(b.jsx)("render",{children:Object(b.jsx)("div",{children:Object(b.jsxs)("body",{className:"profileBody",children:[Object(b.jsx)("br",{}),Object(b.jsx)(L.a,{image:l&&l.picture_url,roundedColor:"#66A5CC",roundedSize:"8",borderRadius:"100"}),Object(b.jsx)("h2",{className:"username",children:l&&(null===l||void 0===l?void 0:l.name)}),Object(b.jsx)("h5",{className:"useremail",children:null===l||void 0===l?void 0:l.email}),Object(b.jsxs)("h5",{className:"useremail",children:[" > ",(null===l||void 0===l?void 0:l.user_type)||"reader"]}),t,Object(b.jsx)("h2",{className:"profileHeaders",children:"Liked Books"}),E,Object(b.jsx)("h2",{className:"profileHeaders",children:"Currently Reading"}),U]})})})}n(87);var D=Object(p.j)((function(e){var t,n=e.history,a=Object(c.useContext)(j).currentUser,r=Object(c.useCallback)(function(){var e=Object(k.a)(g.a.mark((function e(t){var n,c,a,r,i;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),n=t.target.elements,c=n.title,a=n.authoerName,r=n.category,i=n.description;try{o(c,a,i,r)}catch(s){alert(s)}case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n]),o=function(e,c,r,o){var i=t,s=d.storage().ref().child("folder/"+i.name).put(i);s.then(Object(k.a)(g.a.mark((function t(){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s.snapshot.ref.getDownloadURL().then(function(){var t=Object(k.a)(g.a.mark((function t(i){var s,l;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=d.firestore(),l=s.collection("book").doc(),t.next=4,l.set({book_id:l.id,publisher_id:a.uid,title:e.value,author_name:c.value,description:r.value,category:o.value,cover_url:i,rating:0});case 4:n.push("/profile");case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)}))))},i=Object(c.useCallback)((function(e){e.target.files[0]&&(t=e.target.files[0])}),[n]);return Object(b.jsx)("render",{children:Object(b.jsx)("div",{class:"container",children:Object(b.jsxs)("body",{className:"bodyAddBook",children:[Object(b.jsx)("h1",{style:{color:"white"},name:"addbook",children:"Add New Book"}),Object(b.jsxs)("form",{className:"formAddBook",style:{display:"inline-block"},onSubmit:r,children:[Object(b.jsx)("label",{className:"labelAddBook",children:"Book title"}),Object(b.jsx)("input",{className:"inputAddBook",name:"title",type:"label",placeholder:"Book Title"}),Object(b.jsx)("label",{className:"labelAddBook",children:" Author Name "}),Object(b.jsx)("input",{className:"inputAddBook",name:"authoerName",type:"label",placeholder:"Author Name"}),Object(b.jsx)("label",{className:"labelAddBook",children:" category "}),Object(b.jsx)("input",{className:"inputAddBook",name:"category",type:"label",placeholder:"Category"}),Object(b.jsx)("label",{className:"labelAddBook",children:" description "}),Object(b.jsx)("input",{className:"inputAddBook",name:"description",type:"label",placeholder:"Description"}),Object(b.jsx)("label",{className:"labelAddBook",children:" Book Cover "}),Object(b.jsx)("input",{className:"inputFile",type:"file",id:"file",onChange:i}),Object(b.jsx)("button",{className:"buttonAddBook",type:"submit",children:"Add"}),Object(b.jsx)("br",{})]})]})})})})),F=(n(88),[{Name:"Title",order:"title"},{Name:"Author Name",order:"author_name"},{Name:"Rating",order:"rating"}]),P=function(e){e.history;var t=e.searchText,n=(Object(c.useContext)(j).currentUser,d.firestore()),a=Object(c.useState)(),r=Object(s.a)(a,2),o=r[0],i=r[1],l=function(){var e=Object(k.a)(g.a.mark((function e(){var t,c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=[],e.next=4,n.collection("category").get();case 4:(c=e.sent)?c.forEach((function(e){t.push({Name:e.data().Name,id:e.id})})):console.log("There is no categories in the database"),i(t),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),alert("error in getting categories from database");case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),u=[];null!=o&&(u=Object(b.jsxs)("div",{className:"categoriesContainer",children:[Object(b.jsx)("h1",{children:"Categories"}),o.map((function(e){return Object(b.jsx)("a",{className:"categoryLink",onClick:function(){return h(e.Name)},children:Object(b.jsxs)("h3",{className:"categoryLink",children:[" ",e.Name," "]})},e.id)}))]}));var h=function(e){O("title","",e)},f=Object(c.useState)(),p=Object(s.a)(f,2),m=p[0],v=p[1],O=function(){var e=Object(k.a)(g.a.mark((function e(t,c,a){var r,o,i,s,l,u,d,b,j;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r=[],o=n.collection("book"),""==c){e.next=23;break}return i=o.where("title","==",c),s=o.where("author_name","==",c),l=o.where("category","==",c),e.next=9,i.get();case 9:return u=e.sent,e.next=12,s.get();case 12:return d=e.sent,e.next=15,l.get();case 15:b=e.sent,u.forEach((function(e){r.push(e.data())})),d.forEach((function(e){r.push(e.data())})),b.forEach((function(e){r.push(e.data())})),r.sort((function(e,n){return e[t]<n[t]?-1:e[t]>n[t]?1:0})),v(r),e.next=30;break;case 23:return""!==a&&(o=o.where("category","==",a)),e.next=26,o.orderBy(t).get();case 26:(j=e.sent)?j.forEach((function(e){r.push(e.data())})):console.log("There is no books in the database"),console.log(r),v(r);case 30:e.next=36;break;case 32:e.prev=32,e.t0=e.catch(0),alert(e.t0),console.log(e.t0);case 36:case"end":return e.stop()}}),e,null,[[0,32]])})));return function(t,n,c){return e.apply(this,arguments)}}(),x=[];null!=m&&(x=Object(b.jsx)("div",{className:"booksContainer",children:m.map((function(e){return Object(b.jsx)(S,{book:e},e.book_id)}))}));var N=Object(c.useState)(new Array(F.length).fill(!1)),y=Object(s.a)(N,2),w=y[0],_=y[1],C=Object(c.useState)("title"),A=Object(s.a)(C,2),E=A[0],U=A[1],B=Object(b.jsxs)("div",{className:"checkBoxes",children:[Object(b.jsx)("label",{children:"Order By"}),Object(b.jsx)("ul",{children:F.map((function(e,t){return Object(b.jsxs)("li",{children:[Object(b.jsx)("input",{onChange:function(){return function(e){var t=w.map((function(t,n){return n===e&&!t}));_(t),t.forEach((function(e,t){!0===e&&(U(F[t].order),m.sort((function(e,n){return e[F[t].order]<n[F[t].order]?-1:e[F[t].order]>n[F[t].order]?1:0})))}))}(t)},checked:w[t],type:"checkbox"}),e.Name]},t)}))})]}),L=Object(c.useState)(t||""),I=Object(s.a)(L,2),R=I[0],D=I[1];return Object(c.useEffect)((function(){D(t),l(),O(E,R,"")}),[R,t]),Object(b.jsxs)(b.Fragment,{children:[B,x,u]})},T=(n(89),d.firestore()),H=function(e){var t=e.bookId,n=e.fetchReviews,a=Object(c.useContext)(j).currentUser;return a&&Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault();var c=e.target.elements.review.value.trim();if(c){var r={book_id:t,user_id:a.uid,content:c};T.collection("review").doc().set(r).then((function(){console.log("Done"),e.target.elements.review.value="",n()}))}},className:"review-form",children:[Object(b.jsxs)("div",{className:"form-group review-input",children:[Object(b.jsx)("label",{htmlFor:"addReview",className:"review-label",children:"Add a review"}),Object(b.jsx)("input",{type:"text",className:"form-control review-text",id:"addReview",name:"review",placeholder:"Add a review"})]}),Object(b.jsx)("button",{type:"submit",className:"btn btn-primary review-submit",children:"Submit"})]})},J=d.firestore(),Y="https://yt3.ggpht.com/ytc/AAUvwngw35YY8vYI86RTOoEGafSxEjghjzTcKw3LbMyZ=s900-c-k-c0x00ffffff-no-rj",z=function(e){var t=e.review,n=t.user_id,a=t.content,r=Object(c.useState)(Y),o=Object(s.a)(r,2),i=o[0],l=o[1],u=Object(c.useState)("Reviewer"),d=Object(s.a)(u,2),j=d[0],h=d[1];return Object(c.useEffect)((function(){J.collection("user").doc(n).get().then((function(e){var t=e.data();console.log(t),l(t.picture_url),h(t.name)}))}),[]),Object(b.jsx)("div",{className:"review-container mt-3",children:Object(b.jsxs)("div",{className:"comment",children:[Object(b.jsx)("img",{className:"d-flex g-width-50 g-height-50 rounded-circle g-mt-3 g-mr-15",src:i||Y,alt:"Image Description"}),Object(b.jsx)("h5",{className:"h5 g-color-gray-dark-v1 mb-0",children:j||"Reviewer"}),Object(b.jsx)("p",{className:"review-content",children:a})]})})},K=n(48),W=d.firestore(),M=Object(p.j)((function(e){e.history;var t=Object(p.i)().bookId,n=Object(c.useState)([]),a=Object(s.a)(n,2),r=(a[0],a[1]),o=Object(c.useState)({}),l=Object(s.a)(o,2),u=l[0],d=l[1],h=Object(c.useState)(0),f=Object(s.a)(h,2),m=f[0],v=f[1],O=Object(c.useState)(!1),x=Object(s.a)(O,2),g=x[0],k=x[1],N=Object(c.useState)([]),y=Object(s.a)(N,2),w=y[0],S=y[1],_=Object(c.useState)(!1),C=Object(s.a)(_,2),A=C[0],E=C[1],U=Object(c.useContext)(j).currentUser,B=function(){W.collection("book").doc(t).get().then((function(e){console.log(e.data()),d(e.data()),v(e.data().rating)})).catch((function(e){console.error(e)})),W.collection("review").where("book_id","==",t).get().then((function(e){var t=[];e.forEach((function(e){t.push(e.data()),console.log(e.id)})),console.log(t),S(t)})).catch((function(e){console.error(e)}))};return Object(c.useEffect)((function(){U&&(W.collection("user").doc(U.uid).get().then((function(e){var n=e.data().liked_books,c=e.data().currently_reading;-1!==(null===n||void 0===n?void 0:n.indexOf(t))&&k(!0),-1!==(null===c||void 0===c?void 0:c.indexOf(t))&&E(!0)})),W.collection("book").doc(t).get().then((function(e){d(e.data()),W.collection("user").doc(U.uid).get().then((function(e){console.log(e),r(e.data())})).catch((function(e){console.error(e)}))}))),B()}),[t]),Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("div",{className:"review-container",children:Object(b.jsxs)("div",{className:"book-review",children:[Object(b.jsx)("div",{className:"book-review-img",children:Object(b.jsx)("img",{className:"rounded mx-auto d-block",src:u.cover_url})}),Object(b.jsxs)("div",{className:"book-review-summary",children:[U&&Object(b.jsxs)("div",{children:[Object(b.jsx)("button",{style:{color:"".concat(g?"red":"white")},className:"ActionButton",onClick:function(){W.collection("user").doc(U.uid).get().then((function(e){var n=e.data().liked_books;console.log(n);var c=[];null===n||void 0===n||n.forEach((function(e){c.push(e)}));var a=c.indexOf(t);-1!=a?c.splice(a,1):c.push(t),k(!g),null!=c&&0!=c.length||(c=[]),console.log(c),W.collection("user").doc(U.uid).update({liked_books:c})}))},children:Object(b.jsx)("i",{class:"fa fa-thumbs-up",children:g?"liked":"like"})}),Object(b.jsxs)("button",{style:{color:"".concat(A?"red":"white")},className:"ActionButton",onClick:function(){W.collection("user").doc(U.uid).get().then((function(e){var n=e.data().currently_reading,c=[];null===n||void 0===n||n.forEach((function(e){c.push(e)}));var a=c.indexOf(t);-1!=a?c.splice(a,1):c.push(t),E(!A),null!=c&&0!=c.length||(c=[]),W.collection("user").doc(U.uid).update({currently_reading:c})}))},children:[Object(b.jsx)("i",{class:"fa fa-plus"}),A?"Is Reading":"Add to reading"]})]}),Object(b.jsx)("h1",{className:"italic",children:u.title}),Object(b.jsx)("h4",{className:"author-name",children:u.author_name}),Object(b.jsx)("p",{children:u.description}),Object(b.jsx)(K.a,{emptySymbol:"fa fa-star-o fa-2x",fullSymbol:"fa fa-star fa-2x",fractions:"10",initialRating:m,onChange:function(e){console.log(e),v(e),d(Object(i.a)(Object(i.a)({},u),{},{rating:e})),W.collection("book").doc(t).set(Object(i.a)(Object(i.a)({},u),{},{rating:e}))}})]})]})}),Object(b.jsxs)("div",{children:[Object(b.jsx)(H,{bookId:t,fetchReviews:B}),w.map((function(e,t){return Object(b.jsx)(z,{review:e},t)}))]})]})})),Z=(n(90),n.p+"static/media/user-circle-solid.da970b88.svg"),G=d.firestore(),Q=function(e){for(var t=e.search,n=arguments.length,a=new Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=arguments[r];var o=Object(c.useContext)(j),i=o.currentUser,l=Object(c.useRef)(null),u=Object(c.useState)(""),h=Object(s.a)(u,2),f=h[0],m=h[1],v=Object(c.useState)(""),x=Object(s.a)(v,2),g=x[0],k=x[1],N=Object(c.useState)(!1),y=Object(s.a)(N,2),w=y[0],S=y[1],_=Object(p.g)(),C=Object(p.h)(),A=function(){G.collection("user").doc(i.uid).get().then((function(e){e.exists&&m(e.data())})).catch((function(e){console.log(e)}))};Object(c.useEffect)((function(){i&&A(),console.log(a);var e=function(e){null===l.current||l.current.contains(e.target)||S(!w)};return w&&window.addEventListener("click",e),function(){window.removeEventListener("click",e)}}),[w,l,i]);var E=function(){d.auth().signOut().then((function(){_.push("/")})).catch((function(e){alert(e)}))},U=function(){return"/explore"!==C.pathname?(console.log("1"),Object(b.jsx)(O.b,{to:"/explore",className:"fas fa-search",onClick:function(){return t(g)}})):(console.log("0"),Object(b.jsx)("i",{className:"fas fa-search",onClick:function(){return t(g)}}))};return Object(b.jsxs)("nav",{className:"navBarItems",children:[Object(b.jsx)(O.b,{to:"/",className:"title-link",children:Object(b.jsx)("h1",{className:"title-nav",children:"BookNerds"})}),Object(b.jsxs)("div",{className:"search-box",children:[Object(b.jsx)("input",{type:"text",value:g,className:"search-text",name:"searchText",placeholder:"Search books",onChange:function(e){return k(e.target.value)}}),Object(b.jsx)("a",{className:"search-btn",href:"#",children:U()})]}),Object(b.jsxs)("div",{className:"items",children:[Object(b.jsx)(O.b,{to:"/",className:"home-nav",children:"Home"}),Object(b.jsx)(O.b,{to:"/explore",className:"explore-nav",children:"Explore"}),!i&&Object(b.jsxs)("div",{className:"login-signup-container",children:[Object(b.jsx)(O.b,{to:"/login",className:"login-nav",children:"Login"}),Object(b.jsx)(O.b,{to:"/signup",className:"signup-nav",children:"Sign up"})]})]}),i&&Object(b.jsxs)("div",{className:"menu-container",children:[Object(b.jsx)("img",{className:"user-image-nav",src:f?f.picture_url:Z,onClick:function(){return S(!w)}}),Object(b.jsx)("div",{ref:l,className:"menu ".concat(w?"active":"inactive"),children:Object(b.jsxs)("ul",{children:[Object(b.jsx)("li",{children:Object(b.jsx)("div",{className:"username-menu",children:null===f||void 0===f?void 0:f.name})}),Object(b.jsx)("li",{children:Object(b.jsx)(O.b,{to:"/profile",className:"profile-menu",onClick:function(){S(!w)},children:"Profile"})}),Object(b.jsx)("li",{children:Object(b.jsx)(O.b,{onClick:E,children:"Log Out"})})]})})]})]})},X=function(){var e=Object(c.useState)(""),t=Object(s.a)(e,2),n=t[0],a=t[1];return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(Q,{search:function(e){a(e)}}),Object(b.jsx)(v,{exact:!0,path:"/",component:_}),Object(b.jsx)(p.b,{exact:!0,path:"/profile",component:R}),Object(b.jsx)(p.b,{exact:!0,path:"/add-book",component:D}),Object(b.jsx)(p.b,{exact:!0,path:"/reviews/:bookId",component:M}),Object(b.jsx)(p.b,{exact:!0,path:"/explore",render:function(e){return Object(b.jsx)(P,Object(i.a)(Object(i.a)({},e),{},{searchText:n}))}})]})};var q=function(){return Object(b.jsx)(h,{children:Object(b.jsx)(O.a,{children:Object(b.jsxs)(p.d,{children:[Object(b.jsx)(p.b,{exact:!0,path:"/login",component:w}),Object(b.jsx)(p.b,{exact:!0,path:"/signup",component:y}),Object(b.jsx)(p.b,{component:X})]})})})},V=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,108)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),c(e),a(e),r(e),o(e)}))};o.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(q,{})}),document.getElementById("root")),V()}},[[91,1,2]]]);
//# sourceMappingURL=main.5ff94dd8.chunk.js.map